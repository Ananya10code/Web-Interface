<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VocalHub - Enhanced Voice Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white min-h-screen p-10 font-sans">

  <div class="text-center mb-10">
    <h1 class="text-5xl font-bold mb-2">üéôÔ∏è VocalHub</h1>
    <p class="text-xl">AI-Powered Voice Dashboard</p>
    <div id="status" class="mt-2 text-green-200 font-semibold hidden">üéß Listening...</div>
  </div>

  <div id="header-cards" class="flex justify-center gap-6 mb-10">
    <div class="p-6 bg-white/10 backdrop-blur rounded-xl w-[250px] text-center">
      <h2 class="text-2xl font-semibold mb-2">Active Notes</h2>
      <p class="text-5xl font-bold">0</p>
    </div>
    <div class="p-6 bg-white/10 backdrop-blur rounded-xl w-[250px] text-center">
      <h2 class="text-2xl font-semibold mb-2">Pending Tasks</h2>
      <p class="text-5xl font-bold">0</p>
    </div>
    <div class="p-6 bg-white/10 backdrop-blur rounded-xl w-[250px] text-center">
      <h2 class="text-2xl font-semibold mb-2">Commands Today</h2>
      <p class="text-5xl font-bold">0</p>
    </div>
  </div>

  <div id="card-container" class="flex flex-wrap gap-6 mb-10"></div>

  <div class="text-center">
    <button onclick="startVoiceRecognition()" class="px-6 py-3 bg-green-500 rounded-full text-xl hover:bg-green-600">
      <i class="fas fa-microphone mr-2"></i>Start Listening
    </button>
  </div>

<script>
let commandCount = 0;

function createCard(id, title, icon, html) {
  if (document.getElementById(id)) return;
  const card = document.createElement("div");
  card.id = id;
  card.className = "p-6 bg-white/10 backdrop-blur rounded-xl w-[300px]";
  card.innerHTML = `
    <h2 class="text-2xl font-semibold mb-4"><i class="fas ${icon} mr-2"></i>${title}</h2>
    <div>${html}</div>
  `;
  document.getElementById("card-container").appendChild(card);
  updateCommandCount();
}

function updateCommandCount() {
  commandCount++;
  const commandsTodayCard = document.querySelector("#header-cards div:last-child p");
  commandsTodayCard.textContent = commandCount;
}

function showWeather() {
  createCard("weather-card", "Weather", "fa-cloud-sun text-yellow-300", "Temp: 9¬∞C<br>Condition: Rainy<br>Humidity: 30%<br>Location: London, UK");
}

function showCalculator() {
  createCard("calculator-card", "Calculator", "fa-calculator text-yellow-300", `
    <input id="calc-display" type="text" disabled class="w-full mb-4 p-2 bg-white/20 text-xl text-right rounded"/>
    <div class="grid grid-cols-4 gap-2">
      ${["7","8","9","/","4","5","6","*","1","2","3","-","0",".","=","+"].map(v =>
        '<button onclick="calcInput(\'' + v + '\')" class="bg-white/20 rounded p-2">' + v + '</button>').join("")}
      <button onclick="calcClear()" class="col-span-4 bg-red-500 rounded mt-2 p-2">Clear</button>
    </div>`);
}
let calcVal = "";
function calcInput(val) {
  if (val === "=") {
    try { calcVal = eval(calcVal).toString(); }
    catch { calcVal = "Error"; }
  } else { calcVal += val; }
  document.getElementById("calc-display").value = calcVal;
}
function calcClear() {
  calcVal = "";
  document.getElementById("calc-display").value = "";
}

function showGPS() {
  createCard("gps-card", "GPS Location", "fa-map-marker-alt text-red-300", "<p id='gps-info'>Fetching...</p>");
  navigator.geolocation.getCurrentPosition(pos => {
    document.getElementById("gps-info").textContent =
      "Lat: " + pos.coords.latitude.toFixed(4) + ", Lng: " + pos.coords.longitude.toFixed(4);
  }, () => document.getElementById("gps-info").textContent = "Not available");
}

function showClock() {
  createCard("clock-card", "Clock", "fa-clock text-blue-300", "<p id='clock-time' class='text-4xl text-center'>--:--:--</p>");
  setInterval(() => {
    const el = document.getElementById("clock-time");
    if (el) el.textContent = new Date().toLocaleTimeString();
  }, 1000);
}

function showTime() {
  const now = new Date();
  alert("Current time: " + now.toLocaleTimeString());
}

function showYouTube() {
  createCard("youtube-card", "YouTube", "fa-youtube text-red-500",
    "<button onclick=\"window.open('https://youtube.com','_blank')\" class='px-4 py-2 bg-red-500 rounded'>Open YouTube</button>");
}

function playMusic() {
  const audio = new Audio("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3");
  audio.play();
  alert("Playing music...");
}

function startVoiceRecognition() {
  const status = document.getElementById("status");
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (!SpeechRecognition) return alert("Speech recognition not supported!");

  const recognition = new SpeechRecognition();
  recognition.lang = "en-US";
  recognition.continuous = false;
  recognition.interimResults = false;

  status.classList.remove("hidden");

  recognition.onresult = (e) => {
    const cmd = e.results[0][0].transcript.toLowerCase();
    if (cmd.includes("show weather")) showWeather();
    else if (cmd.includes("show calculator")) showCalculator();
    else if (cmd.includes("show gps")) showGPS();
    else if (cmd.includes("show clock")) showClock();
    else if (cmd.includes("show youtube")) showYouTube();
    else if (cmd.includes("show time")) showTime();
    else if (cmd.includes("play music")) playMusic();
    else alert("Unrecognized command: " + cmd);
    status.classList.add("hidden");
  };

  recognition.onerror = () => status.classList.add("hidden");
  recognition.onend = () => status.classList.add("hidden");

  recognition.start();
}
</script>
</body>
</html>
